webpackJsonp([7],{"+XYf":function(e,t){},"7Zj+":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mtWM"),l=a.n(i);var o=[1,2,3],s={mixins:[{data:function(){return{themeArr:[]}},methods:{getThemeArr:function(){return o}},created:function(){this.getThemeArr()}}],props:{nowPid:{},nowLevel:{},tableDatas:{type:Array,default:function(){return[]}},selectionArr:{type:Array,default:function(){return[]}}},data:function(){return{showDetailDialog:!1,detailForm:{},tableData:this.tableDatas,multipleSelection:this.selectionArr,showEditDialog:!1,editFormData:{id:0,name:"",checkList:[],selectedValueIds:[],selectedValue:[]},editFormrules:{name:[{required:!0,message:"请输入素材名称",trigger:"blur"}],checkList:[{required:!0,message:"请选择任务类型",trigger:"change"}]},showEditFolderDialog:!1,editFolder:{id:0,name:""},editFolderRules:{name:[{required:!0,message:"请输入文件名称",trigger:"blur"}]},showImgDialog:!1,imgIdDialog:0,imgDialogSrc:""}},watch:{tableDatas:function(e){this.tableData=e}},methods:{doSortChange:function(e){e.column;var t=e.prop,a=e.order,i=void 0;"ascending"===a?i=0:"descending"===a?i=1:(t="",i=""),this.$emit("doSort",{prop:t,order:i})},downloadImg:function(){this.showImgDialog=!1,this.downloadOne(this.imgIdDialog)},updateFolderName:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){var t=this;this.$refs[e].validate(function(e){if(e){var a={id:t.editFolder.id,name:t.editFolder.name};updateFolderName(a).then(function(e){t.$message.success("修改成功"),t.showEditFolderDialog=!1,t.$emit("refresh")}).catch(function(e){t.$message.error("修改失败"),t.showEditFolderDialog=!1})}})}),delOne:function(e){var t=[];t.push(e),this.$refs.multipleTable.clearSelection(),this.toggleSelection(t),this.$emit("delOne",e.id)},downloadOne:function(e){this.$emit("downloadOne",e)},toggleSelection:function(e){var t=this;e&&e.length>0?e.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e,!0)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){this.multipleSelection=e,this.$parent.$data.checkList=e,console.log(this.$parent.$data.checkList)},newFolder:function(){if(this.tableData.length>0){if(this.tableData[0].nameEdit)return;this.tableData.unshift({fileName:"新建文件夹",hasChecked:!1,materialType:0,operate:"no",nameEdit:!0})}else this.tableData.unshift({fileName:"新建文件夹",hasChecked:!1,materialType:0,operate:"no",nameEdit:!0})},cancelAddFolder:function(){this.tableData[0].nameEdit&&this.tableData.shift()},submitAddFolder:function(){var e=this;if(this.tableData[0].fileName.length>0){var t={pid:this.nowPid,level:this.nowLevel,name:this.tableData[0].fileName};addFolder(t).then(function(t){e.$message.success("新建文件夹成功"),e.$emit("addSuccess")}).catch(function(t){e.$message.error("新建文件夹失败")})}else this.cancelAddFolder()},clickFileName:function(e){if(0===e.materialType)this.$emit("goFolder",e);else if(3===e.materialType){var t=e.imgUrl.substr(e.imgUrl.lastIndexOf(".")+1);t=t.toLowerCase(),this.imgDialogSrc="tif"==t||"tiff"==t||"wbmp"==t?e.thumbnailUrl:e.imgUrl,this.imgIdDialog=e.id,this.showImgDialog=!0}else if(4===e.materialType){var a=window.location.href.split("#");window.open(a[0]+"#/xcNewsDetail?m="+this.$parent.$options.moduleType+"&id="+e.id)}}},created:function(){this.tableData=this.tableDatas,this.multipleSelection=this.selectionArr},mounted:function(){this.toggleSelection(this.multipleSelection)}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{ref:"multipleTable",staticClass:"my-table",staticStyle:{width:"100%"},attrs:{data:e.tableData},on:{"sort-change":e.doSortChange,"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{property:"name",align:"left",width:"190",label:"文件名","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.materialType?a("div",{staticClass:"file-img folder"}):e._e(),e._v(" "),1===t.row.materialType?a("div",{staticClass:"file-img video"}):e._e(),e._v(" "),2===t.row.materialType?a("div",{staticClass:"file-img word",class:{pdf:"pdf"===t.row.fileType,code:"code"===t.row.fileType}}):e._e(),e._v(" "),3===t.row.materialType?a("div",{staticClass:"file-img img"},[a("img",{attrs:{src:t.row.thumbnailUrl,alt:"",width:"20",height:"20"}})]):e._e(),e._v(" "),4===t.row.materialType?a("div",{staticClass:"file-img news"}):e._e(),e._v(" "),!0===t.row.nameEdit?[a("el-input",{staticClass:"edit-input",staticStyle:{width:"90px"},attrs:{size:"mini",maxlength:"50"},model:{value:t.row.fileName,callback:function(a){e.$set(t.row,"fileName","string"==typeof a?a.trim():a)},expression:"scope.row.fileName"}}),e._v(" "),a("el-button",{staticClass:"btns ok",attrs:{plain:"",icon:"el-icon-check"},on:{click:e.submitAddFolder}}),e._v(" "),a("el-button",{staticClass:"btns cancel",attrs:{plain:"",icon:"el-icon-close"},on:{click:e.cancelAddFolder}})]:a("el-link",{staticClass:"file-name",attrs:{underline:!1},on:{click:function(a){return e.clickFileName(t.row)}}},[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{property:"size",align:"center",label:"大小",sortable:"custom",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.size?a("span",[e._v(e._s(t.row.size))]):a("span",[e._v("-")])]}}])}),e._v(" "),a("el-table-column",{attrs:{property:"createdTime",align:"center",label:"上传时间",sortable:"custom",width:"170"}}),e._v(" "),a("el-table-column",{attrs:{property:"createdUserName",align:"center",label:"上传人员","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.createdUserName?a("span",[e._v(e._s(t.row.createdUserName))]):a("span",[e._v("-")])]}}])}),e._v(" "),a("el-table-column",{attrs:{property:"createdOrgName",align:"center",width:"120",label:"上传单位","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.createdOrgName?a("span",[e._v(e._s(t.row.createdOrgName))]):a("span",[e._v("-")])]}}])}),e._v(" "),a("el-table-column",{attrs:{property:"updateTime",align:"center",label:"修改时间",sortable:"custom",width:"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.updateTime?a("span",[e._v(e._s(t.row.updateTime))]):a("span",[e._v("-")])]}}])}),e._v(" "),a("el-table-column",{attrs:{property:"updateUserName",align:"center",label:"修改人员","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.updateUserName?a("span",[e._v(e._s(t.row.updateUserName))]):a("span",[e._v("-")])]}}])}),e._v(" "),a("el-table-column",{attrs:{property:"downloadCount",align:"center",label:"下载量",width:"90"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("el-popover",{attrs:{placement:"top-start",width:"90",trigger:"hover",content:"新闻稿统计为打印量"}},[a("span",{attrs:{slot:"reference"},slot:"reference"},[e._v("下载量 "),a("i",{staticClass:"el-icon-warning",staticStyle:{"font-size":"16px"}})])])]}},{key:"default",fn:function(t){return[t.row.downloadCount?a("span",[e._v(e._s(t.row.downloadCount))]):a("span",[e._v("-")])]}}])}),e._v(" "),3===this.$parent.$options.moduleType?a("el-table-column",{attrs:{align:"center",width:"120",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return"no"!==t.row.operate?[4===t.row.materialType?a("el-button",{attrs:{plain:""},on:{click:function(a){return e.clickFileName(t.row)}}},[e._v("查看")]):a("el-button",{attrs:{plain:""},on:{click:function(a){return e.downloadOne(t.row.id)}}},[e._v("下载")])]:void 0}}],null,!0)}):a("el-table-column",{attrs:{align:"center",width:"180",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return"no"!==t.row.operate?[a("el-button",{attrs:{plain:"",size:"mini"},on:{click:function(a){return e.delOne(t.row)}}},[e._v("删除")]),e._v(" "),4===t.row.materialType?a("el-button",{attrs:{plain:"",size:"mini"},on:{click:function(a){return e.clickFileName(t.row)}}},[e._v("查看")]):a("el-button",{attrs:{plain:"",size:"mini"},on:{click:function(a){return e.downloadOne(t.row.id)}}},[e._v("下载")])]:void 0}}],null,!0)})],1),e._v(" "),a("el-dialog",{staticClass:"detail-dialog",attrs:{title:"素材详情",visible:e.showDetailDialog,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.showDetailDialog=t}}},[a("el-form",{staticClass:"detail-form",attrs:{model:e.detailForm}},[a("el-form-item",{attrs:{label:"名称：",prop:"name","label-width":"100px"}},[a("span",[e._v(e._s(e.detailForm.name))])]),e._v(" "),a("el-form-item",{attrs:{label:"主题：",prop:"theme","label-width":"100px"}},[a("span",[e._v(e._s(e.detailForm.theme))])]),e._v(" "),a("el-form-item",{attrs:{label:"类型：",prop:"materialType","label-width":"100px"}},[a("span",[e._v(e._s(0===e.detailForm.materialType?"文件夹":1===e.detailForm.materialType?"视频":2===e.detailForm.materialType?"文档":3===e.detailForm.materialType?"图片":"新闻稿"))])]),e._v(" "),a("el-form-item",{attrs:{label:"大小：",prop:"size","label-width":"100px"}},[a("span",[e._v(e._s(e.detailForm.size))])]),e._v(" "),a("el-form-item",{attrs:{label:"创建时间：",prop:"createdTime","label-width":"100px"}},[a("span",[e._v(e._s(e.detailForm.createdTime||"--"))])]),e._v(" "),a("el-form-item",{attrs:{label:"创建人员：",prop:"createdUserName","label-width":"100px"}},[a("span",[e._v(e._s(e.detailForm.createdUserName||"--"))])]),e._v(" "),a("el-form-item",{attrs:{label:"修改时间：",prop:"updateTime","label-width":"100px"}},[a("span",[e._v(e._s(e.detailForm.updateTime||"--"))])]),e._v(" "),a("el-form-item",{attrs:{label:"修改人员：",prop:"updateUserName","label-width":"100px"}},[a("span",[e._v(e._s(e.detailForm.updateUserName||"--"))])])],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"}},[e._v("编 辑")]),e._v(" "),a("el-button",{on:{click:function(e){}}},[e._v("下 载")]),e._v(" "),a("el-button",{on:{click:function(e){}}},[e._v("删 除")])],1)],1),e._v(" "),a("el-dialog",{staticClass:"edit-dialog",attrs:{title:"编辑素材",visible:e.showEditDialog,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.showEditDialog=t}}},[a("el-form",{ref:"editFormData",attrs:{"label-width":"130px",model:e.editFormData,rules:e.editFormrules}},[a("el-form-item",{attrs:{label:"素材名称：",prop:"name"}},[a("el-input",{attrs:{maxlength:"50","show-word-limit":""},model:{value:e.editFormData.name,callback:function(t){e.$set(e.editFormData,"name","string"==typeof t?t.trim():t)},expression:"editFormData.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"素材主题：",prop:"checkList"}},[a("div",{staticClass:"share-theme topnav_box"},[a("el-checkbox-group",{model:{value:e.editFormData.checkList,callback:function(t){e.$set(e.editFormData,"checkList",t)},expression:"editFormData.checkList"}},e._l(e.themeArr,function(t){return a("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.name))])}),1)],1)]),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("span",{staticStyle:{color:"red"}},[e._v("*所有上传素材将默认共享至管理员")])])],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitEditList("editFormData")}}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:function(t){e.showEditDialog=!e.showEditDialog}}},[e._v("取 消")])],1)],1),e._v(" "),a("el-dialog",{staticClass:"edit-dialog edit-folder-dialog",attrs:{title:"编辑文件夹",visible:e.showEditFolderDialog,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.showEditFolderDialog=t}}},[a("el-form",{ref:"editFolderDialog",attrs:{"label-width":"130px",model:e.editFolder,rules:e.editFolderRules}},[a("el-form-item",{attrs:{label:"文件夹名称：",prop:"name"}},[a("el-input",{attrs:{maxlength:"50","show-word-limit":""},model:{value:e.editFolder.name,callback:function(t){e.$set(e.editFolder,"name","string"==typeof t?t.trim():t)},expression:"editFolder.name"}})],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updateFolderName("editFolderDialog")}}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:function(t){e.showEditFolderDialog=!e.showEditFolderDialog}}},[e._v("取 消")])],1)],1),e._v(" "),a("el-dialog",{staticClass:"img-dialog",attrs:{title:"图片详情",top:"10vh",visible:e.showImgDialog,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!0},on:{"update:visible":function(t){e.showImgDialog=t}}},[a("el-image",{attrs:{src:e.imgDialogSrc,fit:"contain"}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[a("i",{staticClass:"el-icon-picture-outline",staticStyle:{"font-size":"100px"}})]),e._v(" "),a("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v("\n        加载中"),a("span",{staticClass:"dot"},[e._v("...")])])]),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.downloadImg}},[e._v("下   载")])],1)],1)],1)},staticRenderFns:[]};var n=a("VU/8")(s,r,!1,function(e){a("MI8S")},"data-v-1888455e",null).exports,d={props:{nowPid:{},nowLevel:{},tableDatas:{type:Array,default:function(){return[]}},selectionArr:{type:Array,default:function(){return[]}}},data:function(){return{checkAll:!1,tableData:this.tableDatas,multipleSelection:this.selectionArr,showEditDialog:!1,editFormData:{id:0,name:"",checkList:[],selectedValueIds:[],selectedValue:[]},editFormrules:{name:[{required:!0,message:"请输入素材名称",trigger:"blur"}],checkList:[{required:!0,message:"请选择任务类型",trigger:"change"}]},showImgDialog:!1,imgDialogSrc:"",imgDialogId:0,showDetailDialog:!1,detailTitle:"素材详情",detailForm:{},showEditFolderDialog:!1,editFolder:{id:0,name:""},editFolderRules:{name:[{required:!0,message:"请输入文件名称",trigger:"blur"}]}}},watch:{tableDatas:function(e){this.tableData=e,this.toggleItem(e)}},methods:{updateFolderName:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){var t=this;this.$refs[e].validate(function(e){if(e){var a={id:t.editFolder.id,name:t.editFolder.name};updateFolderName(a).then(function(e){t.$message.success("修改成功"),t.showEditFolderDialog=!1,t.$emit("refresh")}).catch(function(e){t.$message.error("修改失败"),t.showEditFolderDialog=!1})}})}),editOne:function(e){var t=this;if(this.shareOrgArr=[],this.getOrgList(),0===e.materialType)return this.editFolder.id=e.id,this.editFolder.name=e.name,this.showEditFolderDialog=!0,void(this.showDetailDialog=!1);if(this.editFormData.id=e.id,this.editFormData.name=e.name,this.editFormData.checkList=e.themeIds||[],this.editFormData.selectedValueIds=e.shareOrgIds||[],this.editFormData.selectedValue=[],e.shareOrgIds.length>0){var a=e.shareOrg.split("、");e.shareOrgIds.forEach(function(e,i){t.editFormData.selectedValue.push({id:e,org_name:a[i]})})}this.showEditDialog=!0,this.showDetailDialog=!1},downloadOne:function(e){this.showDetailDialog=!1,this.$emit("downloadOne",e)},delOne:function(e){var t=[];t.push(e),this.multipleSelection=t,this.$parent.$data.checkList=t,this.$forceUpdate(),this.showDetailDialog=!1,this.$emit("delOne",e)},clickFolderImg:function(e){this.$emit("goFolder",e)},downloadImg:function(){var e=this,t={type:this.$parent.$options.moduleType,ids:this.imgDialogId},a=this.$loading({lock:!0,text:"下载中，请稍后",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.3)"});downloadMaterial(t).then(function(t){a.close();var i=navigator.userAgent;if(t.headers.errorcode&&"-1"===t.headers.errorcode){var l=t.headers.errormessage;return l=(i.indexOf("MSIE")>=0||i.indexOf("Chrome"),decodeURI(escape(l))),e.$message.closeAll(),void e.$message.error(l)}var o=t.headers.filename;o=(i.indexOf("MSIE")>=0||i.indexOf("Chrome"),decodeURI(escape(o)));var s=t.data;if(s){var r=window.URL.createObjectURL(new Blob([s])),n=document.createElement("a");n.style.display="none",n.href=r,n.setAttribute("download",o),document.body.appendChild(n),n.click()}}).catch(function(t){a.close(),e.$message.closeAll(),e.$message.error(t.message)})},showImg:function(e){var t=e.imgUrl.substr(e.imgUrl.lastIndexOf(".")+1);t=t.toLowerCase(),this.imgDialogSrc="tif"==t||"tiff"==t||"wbmp"==t?e.thumbnailUrl:e.imgUrl,this.imgDialogId=e.id,this.showImgDialog=!0},allChange:function(e){e?(this.tableData.forEach(function(e,t,a){e.hasChecked=!0}),this.multipleSelection=this.tableData,this.$parent.$data.checkList=this.tableData):(this.tableData.forEach(function(e,t,a){e.hasChecked=!1}),this.multipleSelection=[],this.$parent.$data.checkList=[]),this.$forceUpdate()},newFolder:function(){if(this.tableData.length>0){if(this.tableData[0].nameEdit)return;this.tableData.unshift({fileName:"新建文件夹",hasChecked:!1,materialType:0,operate:"no",nameEdit:!0}),this.checkAll=!1}else this.tableData.unshift({fileName:"新建文件夹",hasChecked:!1,materialType:0,operate:"no",nameEdit:!0})},cancelAddFolder:function(){this.tableData[0].nameEdit&&this.tableData.shift()},submitAddFolder:function(){var e=this;if(this.tableData[0].fileName.length>0){var t={pid:this.nowPid,level:this.nowLevel,name:this.tableData[0].fileName};addFolder(t).then(function(t){e.$message.success("新建文件夹成功"),e.$emit("addSuccess")}).catch(function(t){e.$message.error("新建文件夹失败")})}else this.cancelAddFolder()},toDetail:function(e){if(0===e.materialType)this.detailTitle="文件夹详情",this.detailForm=e,this.showDetailDialog=!0;else if(4===e.materialType){var t=window.location.href.split("#");window.open(t[0]+"#/xcNewsDetail?m="+this.$parent.$options.moduleType+"&id="+e.id)}else this.detailTitle="素材详情",this.detailForm=e,this.showDetailDialog=!0},toggleItem:function(e){var t=[];this.tableData.forEach(function(e,a,i){e.hasChecked&&t.push(e)}),this.multipleSelection=t,this.$parent.$data.checkList=t,t.length===this.tableData.length?this.checkAll=!0:this.checkAll=!1,this.$forceUpdate()},toggleSelection:function(e){var t=this;this.tableData.forEach(function(e,t,a){e.hasChecked=!1}),e&&e.length>0&&(e.forEach(function(e){t.tableData.forEach(function(t,a,i){t.id===e.id&&(t.hasChecked=!0)})}),e.length===this.tableData.length?this.checkAll=!0:this.checkAll=!1),this.$forceUpdate()}},created:function(){this.tableData=this.tableDatas,this.multipleSelection=this.selectionArr},mounted:function(){this.toggleSelection(this.multipleSelection)}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"overflow-x":"hidden"}},[a("div",{staticClass:"top-bar"},[a("el-checkbox",{staticClass:"all-checkbox",on:{change:e.allChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}}),e._v(" "),a("span",{staticClass:"all-tips"},[e._v("全选")])],1),e._v(" "),a("el-row",{staticClass:"file-wrapper",attrs:{gutter:12}},[e.tableData.length>0?e._l(e.tableData,function(t){return a("el-col",{key:t.id,staticClass:"file-item"},[t.nameEdit?a("el-card",{staticClass:"file-item-card",attrs:{shadow:"hover"}},[a("div",{staticClass:"file-img folder",attrs:{alt:""}}),e._v(" "),a("el-input",{staticClass:"edit-input",staticStyle:{width:"90px"},attrs:{size:"mini",maxlength:"50"},model:{value:t.fileName,callback:function(a){e.$set(t,"fileName","string"==typeof a?a.trim():a)},expression:"fileItem.fileName"}}),e._v(" "),a("el-button",{staticClass:"btns ok",attrs:{plain:"",icon:"el-icon-check"},on:{click:e.submitAddFolder}}),e._v(" "),a("el-button",{staticClass:"btns cancel",attrs:{plain:"",icon:"el-icon-close"},on:{click:e.cancelAddFolder}})],1):a("el-card",{staticClass:"file-item-card",class:{active:!1},attrs:{shadow:"hover"}},[a("el-checkbox",{staticClass:"checkbox",on:{change:function(a){return e.toggleItem(t)}},model:{value:t.hasChecked,callback:function(a){e.$set(t,"hasChecked",a)},expression:"fileItem.hasChecked"}}),e._v(" "),0===t.materialType?a("div",{staticClass:"file-img folder",staticStyle:{cursor:"pointer"},on:{click:function(a){return e.clickFolderImg(t)}}}):e._e(),e._v(" "),1===t.materialType?a("div",{staticClass:"file-img vedio"}):e._e(),e._v(" "),2===t.materialType?a("div",{staticClass:"file-img word",class:{pdf:"pdf"===t.fileType,ppt:"ppt"===t.fileType||"pptx"===t.fileType}}):e._e(),e._v(" "),3===t.materialType?a("div",{staticClass:"file-img img"},[a("img",{staticStyle:{cursor:"pointer","max-width":"100%"},attrs:{src:t.thumbnailUrl,alt:"",width:"auto",height:"95"},on:{click:function(a){return e.showImg(t)}}})]):e._e(),e._v(" "),4===t.materialType?a("div",{staticClass:"file-img news"}):e._e(),e._v(" "),a("span",{staticClass:"item name",attrs:{title:t.name},on:{click:function(a){return e.toDetail(t)}}},[e._v(e._s(t.name))]),e._v(" "),a("span",{staticClass:"item"},[a("span",{staticClass:"author",staticStyle:{display:"inline-block",width:"47%",overflow:"hidden","text-overflow":"ellipsis"},attrs:{title:t.createdUserName}},[e._v(e._s(t.createdUserName))]),e._v(" "),a("span",{staticClass:"address",staticStyle:{float:"right",display:"inline-block",width:"50%",overflow:"hidden","text-overflow":"ellipsis"},attrs:{title:t.createdOrgName}},[e._v(e._s(t.createdOrgName))])]),e._v(" "),4===t.materialType?a("span",{staticClass:"item download"},[e._v("打印量： "+e._s(t.downloadCount||0))]):e._e(),e._v(" "),0===t.materialType?a("span",{staticClass:"item download"}):e._e(),e._v(" "),1===t.materialType||2===t.materialType||3===t.materialType?a("span",{staticClass:"item download"},[e._v("下载量： "+e._s(t.downloadCount||0))]):e._e(),e._v(" "),0!==t.materialType&&4!==t.materialType?a("span",{staticClass:"item size"},[e._v("大 小： "+e._s(t.sizeText))]):e._e()],1)],1)}):[a("el-table",{attrs:{data:e.tableData}})]],2),e._v(" "),a("el-dialog",{staticClass:"img-dialog",attrs:{title:"图片详情",top:"10vh",visible:e.showImgDialog,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!0},on:{"update:visible":function(t){e.showImgDialog=t}}},[a("el-image",{attrs:{src:e.imgDialogSrc,fit:"contain"}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[a("i",{staticClass:"el-icon-picture-outline",staticStyle:{"font-size":"100px"}})]),e._v(" "),a("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v("\n        加载中"),a("span",{staticClass:"dot"},[e._v("...")])])]),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.downloadImg}},[e._v("下   载")])],1)],1),e._v(" "),a("el-dialog",{staticClass:"detail-dialog",attrs:{title:e.detailTitle,visible:e.showDetailDialog,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.showDetailDialog=t}}},[a("el-form",{staticClass:"detail-form",attrs:{model:e.detailForm}},[a("el-form-item",{attrs:{label:"名称：",prop:"name","label-width":"100px"}},[a("span",[e._v(e._s(e.detailForm.name))])]),e._v(" "),0!==e.detailForm.materialType?[a("el-form-item",{attrs:{label:"主题：",prop:"theme","label-width":"100px"}},[a("span",[e._v(e._s(e.detailForm.theme))])]),e._v(" "),a("el-form-item",{attrs:{label:"类型：",prop:"materialType","label-width":"100px"}},[a("span",[e._v(e._s(0===e.detailForm.materialType?"文件夹":1===e.detailForm.materialType?"视频":2===e.detailForm.materialType?"文档":3===e.detailForm.materialType?"图片":"新闻稿"))])]),e._v(" "),a("el-form-item",{attrs:{label:"大小：",prop:"sizeText","label-width":"100px"}},[a("span",[e._v(e._s(e.detailForm.sizeText))])]),e._v(" "),a("el-form-item",{attrs:{label:"共享对象：",prop:"shareOrg","label-width":"100px"}},[a("span",[e._v(e._s(e.detailForm.shareOrg||"--"))])])]:e._e(),e._v(" "),0===e.detailForm.materialType?a("el-form-item",{attrs:{label:"创建时间：",prop:"createdTime","label-width":"100px"}},[a("span",[e._v(e._s(e.detailForm.createdTime||"--"))])]):a("el-form-item",{attrs:{label:"上传时间：",prop:"createdTime","label-width":"100px"}},[a("span",[e._v(e._s(e.detailForm.createdTime||"--"))])]),e._v(" "),0===e.detailForm.materialType?a("el-form-item",{attrs:{label:"创建人员：",prop:"createdUserName","label-width":"100px"}},[a("span",[e._v(e._s(e.detailForm.createdUserName||"--"))])]):a("el-form-item",{attrs:{label:"上传人员：",prop:"createdUserName","label-width":"100px"}},[a("span",[e._v(e._s(e.detailForm.createdUserName||"--"))])]),e._v(" "),e.detailForm.updateTime?a("el-form-item",{attrs:{label:"修改时间：",prop:"updateTime","label-width":"100px"}},[a("span",[e._v(e._s(e.detailForm.updateTime||"--"))])]):e._e(),e._v(" "),e.detailForm.updateTime?a("el-form-item",{attrs:{label:"修改人员：",prop:"updateUserName","label-width":"100px"}},[a("span",[e._v(e._s(e.detailForm.updateUserName||"--"))])]):e._e()],2),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[3!==this.$parent.$options.moduleType?a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editOne(e.detailForm)}}},[e._v("编 辑")]):e._e(),e._v(" "),a("el-button",{on:{click:function(t){return e.downloadOne(e.detailForm.id)}}},[e._v("下 载")]),e._v(" "),3!==this.$parent.$options.moduleType?a("el-button",{on:{click:function(t){return e.delOne(e.detailForm)}}},[e._v("删 除")]):e._e()],1)],1),e._v(" "),a("el-dialog",{staticClass:"edit-dialog",attrs:{title:"编辑素材",visible:e.showEditDialog,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.showEditDialog=t}}},[a("el-form",{ref:"editFormData",attrs:{"label-width":"130px",model:e.editFormData,rules:e.editFormrules}},[a("el-form-item",{attrs:{label:"素材名称：",prop:"name"}},[a("el-input",{attrs:{maxlength:"50","show-word-limit":""},model:{value:e.editFormData.name,callback:function(t){e.$set(e.editFormData,"name","string"==typeof t?t.trim():t)},expression:"editFormData.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"素材主题：",prop:"checkList"}},[a("div",{staticClass:"share-theme topnav_box"},[a("el-checkbox-group",{model:{value:e.editFormData.checkList,callback:function(t){e.$set(e.editFormData,"checkList",t)},expression:"editFormData.checkList"}},e._l(e.themeArr,function(t){return a("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.name))])}),1)],1)]),e._v(" "),a("el-form-item",{attrs:{label:"共享对象："}},[a("div",{staticClass:"share-org"},[a("div",{staticClass:"left topnav_box"},[a("el-tree",{ref:"tree",attrs:{data:e.shareOrgArr,props:e.defaultProps,"show-checkbox":"","empty-text":"暂无数据","node-key":"id","default-expanded-keys":[1],"default-checked-keys":e.editFormData.selectedValueIds},on:{check:e.handlerTreeCheck}})],1),e._v(" "),a("div",{staticClass:"right topnav_box"},[a("div",[e._l(e.editFormData.selectedValue,function(t,i){return[a("span",{staticClass:"select-tag"},[e._v("\n                    "+e._s(t.org_name)+"\n                    "),a("i",{staticClass:"el-icon-close",on:{click:function(a){return e.handleCloseTag(t)}}})])]})],2)])])]),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("span",{staticStyle:{color:"red"}},[e._v("*所有上传素材将默认共享至管理员")])])],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitEditList("editFormData")}}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:function(t){e.showEditDialog=!e.showEditDialog}}},[e._v("取 消")])],1)],1),e._v(" "),a("el-dialog",{staticClass:"edit-dialog edit-folder-dialog",attrs:{title:"编辑文件夹",visible:e.showEditFolderDialog,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.showEditFolderDialog=t}}},[a("el-form",{ref:"editFolderDialog",attrs:{"label-width":"130px",model:e.editFolder,rules:e.editFolderRules}},[a("el-form-item",{attrs:{label:"文件夹名称：",prop:"name"}},[a("el-input",{attrs:{maxlength:"50","show-word-limit":""},model:{value:e.editFolder.name,callback:function(t){e.$set(e.editFolder,"name","string"==typeof t?t.trim():t)},expression:"editFolder.name"}})],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updateFolderName("editFolderDialog")}}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:function(t){e.showEditFolderDialog=!e.showEditFolderDialog}}},[e._v("取 消")])],1)],1)],1)},staticRenderFns:[]};var m={components:{ListModel:n,ExpandModel:a("VU/8")(d,c,!1,function(e){a("UoCi")},"data-v-c9b6f5ba",null).exports},data:function(){return{showModel:"list",fileList:[],checkList:[]}},methods:{changeModel:function(e){this.showModel=e},handlerDown:function(){},handlerEdit:function(){},handlerMove:function(){},handlerDel:function(){},downloadFunc:function(e){console.log("你要下载的文件id是："+e)},delFunc:function(e){var t=this;console.log(e),this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){for(var a=void 0,i=0;i<t.fileList.length;i++)if(t.fileList[i].id===e){a=i;break}t.fileList.splice(a,1),t.$message({type:"success",message:"删除成功!"}),t.checkList=[]})}},created:function(){var e=this;l()({method:"post",url:"/test/getFiles"}).then(function(t){e.fileList=t.data})}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"btns-group"},[a("el-button",{attrs:{type:"primary",plain:"",size:"mini",icon:"el-icon-download"},on:{click:e.handlerDown}},[e._v("下载")]),e._v(" "),a("el-button",{attrs:{type:"primary",plain:"",size:"mini",icon:"el-icon-edit"},on:{click:e.handlerEdit}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"primary",plain:"",size:"mini",icon:"el-icon-delete"},on:{click:e.handlerDel}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{type:"primary",plain:"",size:"mini",icon:"el-icon-rank"},on:{click:e.handlerMove}},[e._v("移动")]),e._v(" "),a("el-button-group",{staticStyle:{float:"right"}},[a("el-button",{staticClass:"model-change",class:{active:"list"===e.showModel},attrs:{plain:"",size:"mini",icon:"el-icon-tickets"},on:{click:function(t){return e.changeModel("list")}}},[e._v("列表")]),e._v(" "),a("el-button",{staticClass:"model-change",class:{active:"expand"===e.showModel},attrs:{plain:"",size:"mini",icon:"el-icon-menu"},on:{click:function(t){return e.changeModel("expand")}}},[e._v("精简")])],1)],1),e._v(" "),"list"===e.showModel?a("list-model",{ref:"listModel",attrs:{tableDatas:e.fileList,selectionArr:e.checkList},on:{downloadOne:e.downloadFunc,delOne:e.delFunc}}):e._e(),e._v(" "),"expand"===e.showModel?a("expand-model",{ref:"expandModel",attrs:{tableDatas:e.fileList}}):e._e()],1)},staticRenderFns:[]};var p=a("VU/8")(m,h,!1,function(e){a("+XYf")},"data-v-4763e1da",null);t.default=p.exports},MI8S:function(e,t){},UoCi:function(e,t){}});
//# sourceMappingURL=7.4b9439edb137272384e2.js.map